<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta name="keywords" content="online documentation, web online help, web help, chm2web " />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<meta name="generator" content="chm2web Pro 2.85 (unicode)" />
<title>脚本</title>
<meta http-equiv="X-UA-Compatible" content="IE=9">
<link rel="stylesheet" href="../../style.css" type="text/css"
media="screen" title="style" charset="utf-8">
<link rel="stylesheet" href="../../../../files/helpindex.css" type=
"text/css">

<script type="text/JavaScript" src="../../../../files/supply.js"></script>
<script type="text/JavaScript">
chmtop.c2wtopf.pageid = "dadiospice/002_Reference/001_GML Language Overview/401_17_scripts.html";
</script>

</head>
<body><script type="text/JavaScript"> 
if (window.name != "content") 
  document.write(" <table width=\"100%\" bgcolor=\"#e1e1e1\"cellspacing=\"2\" cellpadding=\"0\" style=\"border-collapse: collapse; font-family: sans-serif; font-size: 14px; color: #000000; text-decoration: none;  \"> <tr> <td align=\"center\" style=\"border-bottom: 2px solid gray\" > <br>&nbsp;Click <a href=\"../../../../index.html?page=source%2Fdadiospice%2F002_Reference%2F001_GML%20Language%20Overview%2F401_17_scripts.html\">here</a> to show toolbars of the Web Online Help System: <a href=\"../../../../index.html?page=source%2Fdadiospice%2F002_Reference%2F001_GML%20Language%20Overview%2F401_17_scripts.html\">show toolbars</a><br>&nbsp;</td></tr></table><br> "); 
</script><!-- !chm2web! -->


<h1>脚本</h1>

<h2>脚本是GML的重要部分，这一节使用它们的使用。</h2>

<p>当你在他j建一个脚本，你或者想向它传递参数，或者使用脚本动作，或者在程序中调用脚本（或者其它脚本中）。这些函数储存在 <i>内置</i> 变量 <tt>argument0</tt>、 <tt>argument1</tt>、 ……等等里面，最大 <tt>argument15</tt>。所以代码中调用的时候最多可以传递16个参数，如果使用脚本D'n'D动作，只能指定前面的5个参数。<br><br>在脚本使用<tt>argument0...15</tt>变量，你必须确保这个脚本使用了所有指定的参数。比如你有一个脚本需要两个参数，而你只是提供了一个参数，这样就会报错。同时，提供的参数数量超过需要的也会报错。而且你也可以使用<i>内置</i>参数数组提供许多参数， 他们是 <tt>argument[0 ... 15]</tt>。当使用参数数组的形式传递参数，你可以使用 <a href=
"argument_count.html"><tt>argument_count</tt></a>得知使用了多少个参数，从而自动适应只使用传入的参数（即可选参数）。</p>

<blockquote><i><b>注：</b> 两种参数形式不能混用。你必须 <b>要么</b> 使用<tt>argument0...15</tt> <b>，要么使用</b> argument[0...15]</i>。</blockquote>

<p>脚本也可以返回值，所以可以在表达式中使用。为了这个目的，使用“return”语句：</p>

<p class="code">return &lt;表达式&gt;</p>

<p><br>
应该注意的是“return”语句将结束脚本运行，意味着任何它之后的语句代码<i>将不会运行</i>。下面是一个简单的例子，设计了一个脚本“scr_sqr”用来计算正方形的面积，可以向它传递任何参数，它包含一个错误捕捉，如果传递的不是实例将会跳出：<br>
<br></p>

<p class="code">{<br>if !is_real(argument0) // 如果不是实数<br>&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;return 0; // 在这里跳出<br>&nbsp;&nbsp;&nbsp;}<br>else<br>&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;return (argument0 * argument0); // 正常的计算面积<br>&nbsp;&nbsp;&nbsp;}<br>}</p>

<p><br>
在一个代码块中调用脚本就像调用函数一样 - 使用脚本的名字，括号内填写参数的值。所以，上面的脚本这样使用：<br>
<br></p>

<p class="code">if keyboard_check_pressed(vk_enter) // 检测回车键<br>&nbsp;&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;val = scr_sqr(amount);  // 传递变量amount，返回值赋值给val<br>&nbsp;&nbsp;&nbsp;}<br></p>

<p>有时候，知道向脚本中传递了多少个参数是非常有必要的，<i>GameMaker: Studio</i>也提供了下面的<b>只读</b>变量来获取这个值：</p>

<blockquote>
<div style="margin-left: 2em"><a href=
"argument_count.html">argument_count</a>
</div>
</blockquote>

<p><br>
<br>
更多关于脚本的内容将查阅<a href=
"../../001_Advanced%20Use/006_Scripts.html">高级使用 - 脚本</a>.</p>

<p><br>
</p>

<div class="clear">
<div style="float:left">返回: <a href="index.html">GML 概述</a></div>

<div style="float:right">下一页: <a href=
"401_19_comment.html">脚本注释Comments in Code</a></div>
</div>

<h5>© Copyright YoYo Games Ltd. 2015 All Rights Reserved</h5>

<script type="text/JavaScript">
var fe = FindFrame("toc", top);
if ((fe != null) && (chmtop.c2wtopf.jstree != null)) {
  if (chmtop.c2wtopf.FITEMS[chmtop.c2wtopf.pagenum] != chmtop.c2wtopf.pageid)
    chmtop.c2wtopf.jstree.OpenTreeNode("source/" + chmtop.c2wtopf.pageid);
}
</script>
</body>
</html>
